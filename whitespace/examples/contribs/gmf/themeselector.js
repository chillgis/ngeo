(function(){'use strict';var h,aa=this;
function ba(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";else if("function"==
b&&"undefined"==typeof a.call)return"object";return b}function ca(a){var b=ba(a);return"array"==b||"object"==b&&"number"==typeof a.length}function k(a){return"string"==typeof a}var da="closure_uid_"+(1E9*Math.random()>>>0),fa=0;function m(a,b){a=a.split(".");var c=aa;a[0]in c||!c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)a.length||void 0===b?c[d]?c=c[d]:c=c[d]={}:c[d]=b}
function ga(a,b){function c(){}c.prototype=b.prototype;a.sb=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.ob=function(a,c,f){for(var g=Array(arguments.length-2),l=2;l<arguments.length;l++)g[l-2]=arguments[l];return b.prototype[c].apply(a,g)}};function ha(a){if(Error.captureStackTrace)Error.captureStackTrace(this,ha);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}ga(ha,Error);ha.prototype.name="CustomError";function ia(a,b){for(var c=a.split("%s"),d="",e=Array.prototype.slice.call(arguments,1);e.length&&1<c.length;)d+=c.shift()+e.shift();return d+c.join("%s")};function ja(a,b){b.unshift(a);ha.call(this,ia.apply(null,b));b.shift()}ga(ja,ha);ja.prototype.name="AssertionError";function ka(a,b){throw new ja("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1));};function n(a,b){a.prototype=Object.create(b.prototype);a.prototype.constructor=a}function la(){}function ma(a){return a.fb||(a.fb=++na)}var na=0;function oa(a){this.message="Assertion failed. See /doc/errors/#"+a+" for details.";this.code=a;this.name="AssertionError"}n(oa,Error);function p(a,b){if(!a)throw new oa(b);};var q="function"===typeof Object.assign?Object.assign:function(a,b){if(!a||!a)throw new TypeError("Cannot convert undefined or null to object");for(var c=Object(a),d=1,e=arguments.length;d<e;++d){var f=arguments[d];if(void 0!==f&&null!==f)for(var g in f)f.hasOwnProperty(g)&&(c[g]=f[g])}return c};function pa(a){for(var b in a)delete a[b]};function qa(a){function b(b){var d=a.listener,e=a.pa||a.target;a.ra&&r(a);return d.call(e,b)}return a.qa=b}function ra(a,b){return(a=a.j)?a[b]:void 0}function u(a,b,c,d){var e,f=a.j;f||(f=a.j={});e=f;(f=e[b])||(f=e[b]=[]);a:{e=f;for(var g,l=0,t=e.length;l<t;++l)if(g=e[l],g.listener===c&&g.pa===d){e=g;break a}e=void 0}e?e.ra=!1:(e={pa:d,ra:!1,listener:c,target:a,type:b},a.addEventListener(b,qa(e)),f.push(e));return e}
function r(a){if(a&&a.target){a.target.removeEventListener(a.type,a.qa);var b=ra(a.target,a.type);if(b){var c="deleteIndex"in a?a.deleteIndex:b.indexOf(a);-1!==c&&b.splice(c,1);if(0===b.length){var b=a.target,c=a.type,d=ra(b,c);if(d){for(var e=0,f=d.length;e<f;++e)b.removeEventListener(c,d[e].qa),pa(d[e]);d.length=0;if(d=b.j)delete d[c],0===Object.keys(d).length&&delete b.j}}}pa(a)}};function sa(){};function ta(a){this.type=a;this.target=null}ta.prototype.preventDefault=ta.prototype.stopPropagation=function(){this.gb=!0};function v(){this.h={};this.b={};this.f={}}n(v,sa);v.prototype.addEventListener=function(a,b){var c=this.f[a];c||(c=this.f[a]=[]);-1===c.indexOf(b)&&c.push(b)};function ua(a,b){var c="string"===typeof b?new ta(b):b;b=c.type;c.target=a;var d=a.f[b];if(d){b in a.b||(a.b[b]=0,a.h[b]=0);++a.b[b];for(var e=0,f=d.length;e<f&&!1!==d[e].call(a,c)&&!c.gb;++e);--a.b[b];if(0===a.b[b]){c=a.h[b];for(delete a.h[b];c--;)a.removeEventListener(b,la);delete a.b[b]}}}
v.prototype.removeEventListener=function(a,b){var c=this.f[a];c&&(b=c.indexOf(b),a in this.h?(c[b]=la,++this.h[a]):(c.splice(b,1),0===c.length&&delete this.f[a]))};function va(){v.call(this);this.Ga=0}n(va,v);function x(a){++a.Ga;ua(a,"change")}va.prototype.on=function(a,b,c){if(Array.isArray(a)){for(var d=a.length,e=Array(d),f=0;f<d;++f)e[f]=u(this,a[f],b,c);return e}return u(this,a,b,c)};function wa(a,b,c){ta.call(this,a);this.key=b;this.oldValue=c}n(wa,ta);function y(a){va.call(this);ma(this);this.c={};void 0!==a&&xa(this,a)}n(y,va);var ya={};function za(a){return ya.hasOwnProperty(a)?ya[a]:ya[a]="change:"+a}y.prototype.get=function(a){var b;this.c.hasOwnProperty(a)&&(b=this.c[a]);return b};y.prototype.o=function(){return Object.keys(this.c)};y.prototype.notify=function(a,b){var c;c=za(a);ua(this,new wa(c,a,b));ua(this,new wa("propertychange",a,b))};
y.prototype.set=function(a,b,c){c?this.c[a]=b:(c=this.c[a],this.c[a]=b,c!==b&&this.notify(a,c))};function xa(a,b){for(var c in b)a.set(c,b[c],void 0)};var Aa=function(){var a;"cosh"in Math?a=Math.cosh:a=function(a){a=Math.exp(a);return(a+1/a)/2};return a}();/*

 Latitude/longitude spherical geodesy formulae taken from
 http://www.movable-type.co.uk/scripts/latlong.html
 Licensed under CC-BY-3.0.
*/
function Ca(a){this.radius=a}function Da(a,b){var c=a[1]*Math.PI/180,d=b[1]*Math.PI/180,e=(d-c)/2;a=(b[0]-a[0])*Math.PI/180/2;c=Math.sin(e)*Math.sin(e)+Math.sin(a)*Math.sin(a)*Math.cos(c)*Math.cos(d);return 2*Ea.radius*Math.atan2(Math.sqrt(c),Math.sqrt(1-c))}
Ca.prototype.offset=function(a,b,c){var d=a[1]*Math.PI/180;b/=this.radius;var e=Math.asin(Math.sin(d)*Math.cos(b)+Math.cos(d)*Math.sin(b)*Math.cos(c));return[180*(a[0]*Math.PI/180+Math.atan2(Math.sin(c)*Math.sin(b)*Math.cos(d),Math.cos(b)-Math.sin(d)*Math.sin(e)))/Math.PI,180*e/Math.PI]};var Ea=new Ca(6370997);var Fa={};Fa.degrees=2*Math.PI*Ea.radius/360;Fa.ft=.3048;Fa.m=1;Fa["us-ft"]=1200/3937;
function A(a){this.a=a.code;this.b=a.units;this.j=void 0!==a.extent?a.extent:null;this.f=void 0!==a.ha?a.ha:"enu";this.h=void 0!==a.X?a.X:this.g;this.c=a.Ba;var b=Ga,c=a.code,d=Ha||window.proj4;if("function"==typeof d&&void 0===b[c]){var e=d.defs(c);if(void 0!==e){void 0!==e.axis&&void 0===a.ha&&(this.f=e.axis);void 0===a.Ba&&(this.c=e.to_meter);void 0===a.units&&(this.b=e.units);var f,g;for(f in b)if(a=d.defs(f),void 0!==a)if(b=B(f),a===e)Ia([b,this]);else{g=d(f,c);a=g.forward;g=g.inverse;var b=
B(b),l=B(this);Ja(b,l,Ka(a));Ja(l,b,Ka(g))}}}}A.prototype.O=function(){return this.j};A.prototype.g=function(a,b){if("degrees"==this.b)return a;var c=La(this,B("EPSG:4326"));a=[b[0]-a/2,b[1],b[0]+a/2,b[1],b[0],b[1]-a/2,b[0],b[1]+a/2];a=c(a,a,2);c=(Da(a.slice(0,2),a.slice(2,4))+Da(a.slice(4,6),a.slice(6,8)))/2;a=this.c||Fa[this.b];void 0!==a&&(c/=a);return c};A.prototype.X=function(a,b){return this.h(a,b)};var Ga={},Ma={},Ha=null;
function Ia(a){Na(a);a.forEach(function(b){a.forEach(function(a){b!==a&&Ja(b,a,Oa)})})}function Pa(a){Ga[a.a]=a;Ja(a,a,Oa)}function Na(a){var b=[];a.forEach(function(a){b.push(Pa(a))})}function Ja(a,b,c){a=a.a;b=b.a;a in Ma||(Ma[a]={});Ma[a][b]=c}function Ka(a){return function(b,c,d){var e=b.length;d=void 0!==d?d:2;c=void 0!==c?c:Array(e);var f,g;for(g=0;g<e;g+=d)for(f=a([b[g],b[g+1]]),c[g]=f[0],c[g+1]=f[1],f=d-1;2<=f;--f)c[g+f]=b[g+f];return c}}
function B(a){var b;if(a instanceof A)b=a;else if("string"===typeof a){b=Ga[a];var c=Ha||window.proj4;void 0===b&&"function"==typeof c&&void 0!==c.defs(a)&&(b=new A({code:a}),Pa(b))}return b||null}function La(a,b){a=a.a;b=b.a;var c;a in Ma&&b in Ma[a]&&(c=Ma[a][b]);void 0===c&&(c=Qa);return c}function Qa(a,b){if(void 0!==b&&a!==b){for(var c=0,d=a.length;c<d;++c)b[c]=a[c];a=b}return a}function Oa(a,b){if(void 0!==b){for(var c=0,d=a.length;c<d;++c)b[c]=a[c];a=b}else a=a.slice();return a}
function Ra(a,b){var c;c=B("EPSG:4326");b=B(b);c=La(c,b);a=[a[0],a[1],a[0],a[3],a[2],a[1],a[2],a[3]];c(a,a,2);b=[a[0],a[2],a[4],a[6]];var d=[a[1],a[3],a[5],a[7]];a=Math.min.apply(null,b);c=Math.min.apply(null,d);b=Math.max.apply(null,b);d=Math.max.apply(null,d);a=[a,c,b,d];return a};(function(){if(!("HTMLCanvasElement"in window))return!1;try{return document.createElement("CANVAS").getContext("2d")?!0:!1}catch(a){return!1}})();function Sa(a,b){return a>b?1:a<b?-1:0}function Ta(a,b){var c=a.length;if(a[0]<=b)return 0;if(!(b<=a[c-1])){var d;for(d=1;d<c;++d){if(a[d]==b)return d;if(a[d]<b)return a[d-1]-b<b-a[d]?d-1:d}}return c-1}function Ua(a,b){for(var c=a.length>>>0,d,e=0;e<c;e++)if(d=a[e],b(d,e,a))return d;return null}function Va(a,b){var c;return a.every(function(d,e){c=e;return!b(d,e,a)})?-1:c}function Wa(a,b){var c=b||Sa;return a.every(function(b,e){if(0===e)return!0;b=c(a[e-1],b);return!(0<b||0===b)})};function Xa(a,b){var c=/\{z\}/g,d=/\{x\}/g,e=/\{y\}/g,f=/\{-y\}/g;return function(g){if(g)return a.replace(c,g[0].toString()).replace(d,g[1].toString()).replace(e,function(){return(-g[2]-1).toString()}).replace(f,function(){var a=b.h?b.h[g[0]]:null;p(a,55);return(a.a-a.b+1+g[2]).toString()})}}function Ya(a,b){for(var c=a.length,d=Array(c),e=0;e<c;++e)d[e]=Xa(a[e],b);return Za(d)}
function Za(a){return 1===a.length?a[0]:function(b,c,d){if(b){var e=a.length,f=((b[1]<<b[0])+b[2])%e;return a[0>f*e?f+e:f](b,c,d)}}}function $a(){}function ab(a){var b=[],c=/\{([a-z])-([a-z])\}/.exec(a);if(c){var d=c[2].charCodeAt(0),e;for(e=c[1].charCodeAt(0);e<=d;++e)b.push(a.replace(c[0],String.fromCharCode(e)));return b}if(c=c=/\{(\d+)-(\d+)\}/.exec(a)){d=parseInt(c[2],10);for(e=parseInt(c[1],10);e<=d;e++)b.push(a.replace(c[0],e.toString()));return b}b.push(a);return b};function bb(a,b){v.call(this);this.state=b;this.key=""}n(bb,v);bb.prototype.Y=function(){return this.state};function cb(a,b,c,d){bb.call(this,0,b);this.a=new Image;null!==d&&(this.a.crossOrigin=d)}n(cb,bb);function db(){this.f=0;this.c={};this.a=this.b=null}h=db.prototype;h.clear=function(){this.f=0;this.c={};this.a=this.b=null};h.forEach=function(a,b){for(var c=this.b;c;)a.call(b,c.V,c.P,this),c=c.C};h.get=function(a){a=this.c[a];p(void 0!==a,15);if(a===this.a)return a.V;a===this.b?(this.b=this.b.C,this.b.G=null):(a.C.G=a.G,a.G.C=a.C);a.C=null;a.G=this.a;this.a=this.a.C=a;return a.V};h.I=function(){return this.f};h.o=function(){var a=Array(this.f),b=0,c;for(c=this.a;c;c=c.G)a[b++]=c.P;return a};
h.s=function(){var a=Array(this.f),b=0,c;for(c=this.a;c;c=c.G)a[b++]=c.V;return a};h.replace=function(a,b){this.get(a);this.c[a].V=b};h.set=function(a,b){p(!(a in this.c),16);b={P:a,C:null,G:this.a,V:b};this.a?this.a.C=b:this.b=b;this.a=b;this.c[a]=b;++this.f};function eb(){db.call(this)}n(eb,db);navigator.userAgent.match("CriOS");function fb(a,b,c,d){this.f=a;this.c=b;this.b=c;this.a=d}fb.prototype.contains=function(a){var b=a[1];a=a[2];return this.f<=b&&b<=this.c&&this.b<=a&&a<=this.a};fb.prototype.equals=function(a){return this.f==a.f&&this.b==a.b&&this.c==a.c&&this.a==a.a};fb.prototype.extend=function(a){a.f<this.f&&(this.f=a.f);a.c>this.c&&(this.c=a.c);a.b<this.b&&(this.b=a.b);a.a>this.a&&(this.a=a.a)};function gb(a){this.ca=void 0!==a.ca?a.ca:0;this.a=a.R;p(Wa(this.a,function(a,b){return b-a}),17);this.w=this.a.length-1;this.b=void 0!==a.origin?a.origin:null;this.c=null;void 0!==a.da&&(this.c=a.da,p(this.c.length==this.a.length,20));var b=a.extent;void 0===b||this.b||this.c||(this.b=[b[0],b[3]]);p(!this.b&&this.c||this.b&&!this.c,18);this.f=null;void 0!==a.ga&&(this.f=a.ga,p(this.f.length==this.a.length,19));this.g=void 0!==a.tileSize?a.tileSize:this.f?null:256;p(!this.g&&this.f||this.g&&!this.f,
22);this.D=void 0!==b?b:null;this.h=null;this.S=[0,0];void 0!==a.sizes?this.h=a.sizes.map(function(a){return new fb(Math.min(0,a[0]),Math.max(a[0]-1,-1),Math.min(0,a[1]),Math.max(a[1]-1,-1))},this):b&&hb(this,b)}var C=[0,0,0];gb.prototype.O=function(){return this.D};gb.prototype.j=function(a){return this.a[a]};
function ib(a,b,c,d,e){var f=Math.min(Math.max(Ta(a.a,d),a.ca),a.w),g=d/a.j(f),l=a.b?a.b:a.c[f],t;t=a.g?a.g:a.f[f];a=a.S;Array.isArray(t)||(void 0===a?a=[t,t]:a[0]=a[1]=t,t=a);b=g*Math.floor((b-l[0])/d+(e?.5:0))/t[0];c=g*Math.floor((c-l[1])/d+(e?0:.5))/t[1];e?(b=Math.ceil(b)-1,c=Math.ceil(c)-1):(b=Math.floor(b),c=Math.floor(c));void 0!==C&&(C[0]=f,C[1]=b,C[2]=c)}
function hb(a,b){for(var c=a.a.length,d=Array(c),e=a.ca;e<c;++e){var f=e,g;g=a;var l=b,t=g.j(e);ib(g,l[0],l[1],t,!1);var F=C[1],w=C[2];ib(g,l[2],l[3],t,!0);g=new fb(F,C[1],w,C[2]);d[f]=g}a.h=d};function jb(){};function D(a){y.call(this);B(a.projection);var b=a.l;if(!("string"===typeof b||b instanceof jb)&&Array.isArray(b))for(var c=b.length,d=Array(c),e=0;e<c;e++){var f=b[e];d[e]="string"===typeof f?new jb:f}this.i=void 0!==a.state?a.state:"ready"}n(D,y);D.prototype.Y=function(){return this.i};D.prototype.refresh=function(){x(this)};D.prototype.ea=function(a){this.i=a;x(this)};function kb(a){D.call(this,{l:a.l,extent:a.extent,u:a.u,projection:a.projection,state:a.state,wrapX:a.wrapX});this.v=void 0!==a.v?a.v:null;this.Ha=new eb;this.P=""}n(kb,D);function lb(a,b){a.P!==b&&(a.P=b,x(a))}kb.prototype.refresh=function(){this.Ha.clear();x(this)};function mb(a){kb.call(this,{l:a.l,N:a.N,extent:a.extent,u:a.u,la:a.la,projection:a.projection,state:a.state,v:a.v,T:a.T,wrapX:a.wrapX});this.K=a.K;this.L=this.a?this.a.bind(this):$a;this.B=null;if(a.B){var b=a.B;this.B=b;var c=b.join("\n");nb(this,this.a?this.a.bind(this):Ya(b,this.v),c)}else a.url&&(b=a.url,c=this.B=ab(b),nb(this,this.a?this.a.bind(this):Ya(c,this.v),b));a.L&&nb(this,a.L)}n(mb,kb);function nb(a,b,c){a.L=b;"undefined"!==typeof c?lb(a,c):x(a)};function ob(a){mb.call(this,{l:a.l,N:a.N,extent:a.extent,u:a.u,la:a.la,projection:a.projection,state:a.state,v:a.v,K:a.K?a.K:pb,T:a.T,L:a.L,url:a.url,B:a.B,wrapX:a.wrapX});this.crossOrigin=void 0!==a.crossOrigin?a.crossOrigin:null;this.fa=void 0!==a.fa?a.fa:cb}n(ob,mb);function pb(a,b){a.a.src=b};function qb(a){this.i=a.eb;gb.call(this,{extent:a.extent,origin:a.origin,da:a.da,R:a.R,tileSize:a.tileSize,ga:a.ga,sizes:a.sizes})}n(qb,gb);
function rb(a,b){var c=[],d=[],e=[],f=[],g=[],l;l=B(a.SupportedCRS.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"));var t=l.c||Fa[l.b],F="ne"==l.f.substr(0,2);a.TileMatrix.sort(function(a,b){return b.ScaleDenominator-a.ScaleDenominator});a.TileMatrix.forEach(function(a){d.push(a.Identifier);var b=2.8E-4*a.ScaleDenominator/t,l=a.TileWidth,ea=a.TileHeight;F?e.push([a.TopLeftCorner[1],a.TopLeftCorner[0]]):e.push(a.TopLeftCorner);c.push(b);f.push(l==ea?l:[l,ea]);g.push([a.MatrixWidth,-a.MatrixHeight])});
return new qb({extent:b,da:e,R:c,eb:d,ga:f,sizes:g})};function sb(a,b){var c=[];Object.keys(b).forEach(function(a){null!==b[a]&&void 0!==b[a]&&c.push(a+"="+encodeURIComponent(b[a]))});var d=c.join("&");a=a.replace(/[?&]$/,"");a=-1===a.indexOf("?")?a+"?":a+"&";return a+d};function tb(a){function b(a){a=d==ub?sb(a,f):a.replace(/\{(\w+?)\}/g,function(a,b){return b.toLowerCase()in f?f[b.toLowerCase()]:a});return function(b){if(b){var c={TileMatrix:e.i[b[0]],TileCol:b[1],TileRow:-b[2]-1};q(c,g);b=a;return b=d==ub?sb(b,c):b.replace(/\{(\w+?)\}/g,function(a,b){return c[b]})}}}this.lb=void 0!==a.version?a.version:"1.0.0";this.w=void 0!==a.format?a.format:"image/jpeg";this.g=void 0!==a.dimensions?a.dimensions:{};this.S=a.layer;this.D=a.matrixSet;this.na=a.style;var c=a.B;
void 0===c&&void 0!==a.url&&(c=ab(a.url));var d=this.mb=void 0!==a.requestEncoding?a.requestEncoding:ub,e=a.v,f={layer:this.S,style:this.na,tilematrixset:this.D};d==ub&&q(f,{Service:"WMTS",Request:"GetTile",Version:this.lb,Format:this.w});var g=this.g,l=c&&0<c.length?Za(c.map(b)):$a;ob.call(this,{l:a.l,N:a.N,crossOrigin:a.crossOrigin,u:a.u,projection:a.projection,hb:a.hb,fa:a.fa,v:e,K:a.K,T:a.T,L:l,B:c,wrapX:void 0!==a.wrapX?a.wrapX:!1});lb(this,vb(this))}n(tb,ob);
function vb(a){var b=0,c=[],d;for(d in a.g)c[b++]=d+"-"+a.g[d];return c.join("/")}function wb(a,b){q(a.g,b);lb(a,vb(a))}
function xb(a,b){var c=Ua(a.Contents.Layer,function(a){return a.Identifier==b.layer}),d=a.Contents.TileMatrixSet,e,f;e=1<c.TileMatrixSetLink.length?"projection"in b?Va(c.TileMatrixSetLink,function(a){return Ua(d,function(b){return b.Identifier==a.TileMatrixSet}).SupportedCRS.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3")==b.projection}):Va(c.TileMatrixSetLink,function(a){return a.TileMatrixSet==b.matrixSet}):0;0>e&&(e=0);f=c.TileMatrixSetLink[e].TileMatrixSet;var g=c.Format[0];"format"in b&&
(g=b.format);e=Va(c.Style,function(a){return"style"in b?a.Title==b.style:a.isDefault});0>e&&(e=0);e=c.Style[e].Identifier;var l={};"Dimension"in c&&c.Dimension.forEach(function(a){var b=a.Identifier,c=a.Default;void 0===c&&(c=a.Value[0]);l[b]=c});var t=Ua(a.Contents.TileMatrixSet,function(a){return a.Identifier==f}),F;F="projection"in b?B(b.projection):B(t.SupportedCRS.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"));var w=c.WGS84BoundingBox,z,Ba;void 0!==w&&(Ba=B("EPSG:4326").O(),Ba=w[0]==
Ba[0]&&w[2]==Ba[2],z=Ra(w,F),(w=F.O())&&(w[0]<=z[0]&&z[2]<=w[2]&&w[1]<=z[1]&&z[3]<=w[3]||(z=void 0)));var t=rb(t,z),ea=[];z=b.requestEncoding;z=void 0!==z?z:"";if("OperationsMetadata"in a&&"GetTile"in a.OperationsMetadata){a=a.OperationsMetadata.GetTile.DCP.HTTP.Get;for(var w=0,Sc=a.length;w<Sc;++w){var Vb=Ua(a[w].Constraint,function(a){return"GetEncoding"==a.name}).AllowedValues.Value;""===z&&(z=Vb[0]);if(z===ub)0<=Vb.indexOf(ub)&&ea.push(a[w].href);else break}}0===ea.length&&(z=yb,c.ResourceURL.forEach(function(a){"tile"===
a.resourceType&&(g=a.format,ea.push(a.template))}));return{B:ea,layer:b.layer,matrixSet:f,format:g,projection:F,requestEncoding:z,v:t,style:e,dimensions:l,wrapX:Ba}}var ub="KVP",yb="REST";function zb(a){y.call(this);var b=q({},a);b.opacity=void 0!==a.opacity?a.opacity:1;b.visible=void 0!==a.visible?a.visible:!0;b.zIndex=void 0!==a.zIndex?a.zIndex:0;b.maxResolution=void 0!==a.maxResolution?a.maxResolution:Infinity;b.minResolution=void 0!==a.minResolution?a.minResolution:0;xa(this,b);this.F={layer:this,cb:!0}}n(zb,y);zb.prototype.O=function(){return this.get("extent")};function E(a){var b=q({},a);delete b.source;zb.call(this,b);this.i=this.g=this.a=null;a.map&&this.setMap(a.map);u(this,za("source"),this.w,this);this.set("source",a.source?a.source:null)}n(E,zb);function Ab(a){return a.get("source")||null}E.prototype.ya=function(){var a=Ab(this);return a?a.Y():"undefined"};E.prototype.D=function(){x(this)};E.prototype.w=function(){this.i&&(r(this.i),this.i=null);var a=Ab(this);a&&(this.i=u(a,"change",this.D,this));x(this)};
E.prototype.setMap=function(a){this.a&&(r(this.a),this.a=null);a||x(this);this.g&&(r(this.g),this.g=null);a&&(this.a=u(a,"precompose",function(a){var c;c=this.F;var d=this.get("opacity");c.opacity=Math.min(Math.max(d,0),1);this.F.rb=this.ya();this.F.visible=this.get("visible");this.F.extent=this.O();this.F.zIndex=this.get("zIndex");this.F.maxResolution=this.get("maxResolution");this.F.minResolution=Math.max(this.get("minResolution"),0);c=this.F;c.cb=!1;c.zIndex=Infinity;a.frameState.qb.push(c);a.frameState.pb[ma(this)]=
c},this),this.g=u(this,"change",a.render,a),x(this))};function Bb(a){a=a?a:{};var b=q({},a);delete b.ma;delete b.Fa;E.call(this,b);this.set(Cb,void 0!==a.ma?a.ma:0);this.set(Db,void 0!==a.Fa?a.Fa:!0)}n(Bb,E);var Cb="preload",Db="useInterimTilesOnError";function Eb(a){y.call(this);this.a=a?a:[];Fb(this)}n(Eb,y);h=Eb.prototype;h.clear=function(){for(;0<this.get(Gb);)Hb(this,this.get(Gb)-1)};h.extend=function(a){var b,c;b=0;for(c=a.length;b<c;++b)this.push(a[b]);return this};h.forEach=function(a,b){this.a.forEach(a,b)};h.push=function(a){var b=this.a.length;this.a.splice(b,0,a);Fb(this);ua(this,new Ib(Jb,a));return b};h.remove=function(a){var b=this.a,c,d;c=0;for(d=b.length;c<d;++c)if(b[c]===a)return Hb(this,c)};
function Hb(a,b){var c=a.a[b];a.a.splice(b,1);Fb(a);ua(a,new Ib(Kb,c));return c}function Fb(a){a.set(Gb,a.a.length)}var Gb="length",Jb="add",Kb="remove";function Ib(a,b){ta.call(this,a);this.element=b}n(Ib,ta);try{new MouseEvent("click",{buttons:1})}catch(a){};function Lb(a){var b=a||{};a=q({},b);delete a.layers;b=b.layers;zb.call(this,a);this.a=[];this.listenerKeys_={};u(this,za(G),this.$a,this);b?Array.isArray(b)?b=new Eb(b.slice()):p(b instanceof Eb,43):b=new Eb;this.set(G,b)}n(Lb,zb);h=Lb.prototype;h.ba=function(){this.get("visible")&&x(this)};
h.$a=function(){this.a.forEach(r);this.a.length=0;var a=this.get(G);this.a.push(u(a,Jb,this.Za,this),u(a,Kb,this.ab,this));for(var b in this.listenerKeys_)this.listenerKeys_[b].forEach(r);pa(this.listenerKeys_);var a=a.a,c,d;b=0;for(c=a.length;b<c;b++)d=a[b],this.listenerKeys_[ma(d).toString()]=[u(d,"propertychange",this.ba,this),u(d,"change",this.ba,this)];x(this)};
h.Za=function(a){a=a.element;var b=ma(a).toString();this.listenerKeys_[b]=[u(a,"propertychange",this.ba,this),u(a,"change",this.ba,this)];x(this)};h.ab=function(a){a=ma(a.element).toString();this.listenerKeys_[a].forEach(r);delete this.listenerKeys_[a];x(this)};h.ya=function(){return"ready"};var G="layers";function Mb(a){A.call(this,{code:a,units:"m",extent:Nb,global:!0,nb:Ob})}n(Mb,A);Mb.prototype.X=function(a,b){return a/Aa(b[1]/6378137)};var H=6378137*Math.PI,Nb=[-H,-H,H,H],Ob=[-180,-85,180,85],Pb="EPSG:3857 EPSG:102100 EPSG:102113 EPSG:900913 urn:ogc:def:crs:EPSG:6.18:3:3857 urn:ogc:def:crs:EPSG::3857 http://www.opengis.net/gml/srs/epsg.xml#3857".split(" ").map(function(a){return new Mb(a)});
function Qb(a,b,c){var d=a.length;c=1<c?c:2;void 0===b&&(2<c?b=a.slice():b=Array(d));for(var e=0;e<d;e+=c){b[e]=H*a[e]/180;var f=6378137*Math.log(Math.tan(Math.PI*(a[e+1]+90)/360));f>H?f=H:f<-H&&(f=-H);b[e+1]=f}return b}function Rb(a,b,c){var d=a.length;c=1<c?c:2;void 0===b&&(2<c?b=a.slice():b=Array(d));for(var e=0;e<d;e+=c)b[e]=180*a[e]/H,b[e+1]=360*Math.atan(Math.exp(a[e+1]/6378137))/Math.PI-90;return b};var Sb=new Ca(6378137);function I(a,b){A.call(this,{code:a,units:"degrees",extent:Tb,ha:b,global:!0,Ba:Ub,nb:Tb})}n(I,A);I.prototype.X=function(a){return a};var Tb=[-180,-90,180,90],Ub=Math.PI*Sb.radius/180,Wb=[new I("CRS:84"),new I("EPSG:4326","neu"),new I("urn:ogc:def:crs:EPSG::4326","neu"),new I("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new I("urn:ogc:def:crs:OGC:1.3:CRS84"),new I("urn:ogc:def:crs:OGC:2:84"),new I("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new I("urn:x-ogc:def:crs:EPSG:4326","neu")];function Xb(a){E.call(this,a?a:{})}n(Xb,E);function Yb(a){D.call(this,{l:a.l,extent:a.extent,u:a.u,projection:a.projection,state:a.state})}n(Yb,D);Ia(Pb);Ia(Wb);Wb.forEach(function(a){Pb.forEach(function(b){Ja(a,b,Qb);Ja(b,a,Rb)})});var J=angular.module("ngeo",["gettext","ui.date","floatThead"]);m("ngeo.FeatureProperties",{ANGLE:"a",COLOR:"c",IS_CIRCLE:"l",IS_RECTANGLE:"r",IS_TEXT:"t",NAME:"n",OPACITY:"o",AZIMUT:"z",SHOW_MEASURE:"m",SIZE:"s",STROKE:"k"});m("ngeo.GeometryType",{CIRCLE:"Circle",LINE_STRING:"LineString",POINT:"Point",POLYGON:"Polygon",RECTANGLE:"Rectangle",TEXT:"Text"});var K=angular.module("gmf",[J.name,"gettext","ngAnimate","ngTouch","ngSanitize","tmh.dynamicLocale","ui.date","ui.slider"]);K.config(["tmhDynamicLocaleProvider","angularLocaleScript",function(a,b){a.localeLocationPattern(b)}]);m("gmf.DATALAYERGROUP_NAME","data");m("gmf.COORDINATES_LAYER_NAME","gmfCoordinatesLayerName");function Zb(a){return a.getAttributeNS("http://www.w3.org/1999/xlink","href")};function $b(a,b,c){if(a.nodeType==Node.CDATA_SECTION_NODE||a.nodeType==Node.TEXT_NODE)b?c.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,"")):c.push(a.nodeValue);else for(a=a.firstChild;a;a=a.nextSibling)$b(a,b,c);return c}function ac(){var a=bc;return function(b,c){b=a.call(this,b,c);void 0!==b&&c[c.length-1].push(b)}}function L(a){return function(b,c){var d=a.call(this,b,c);if(void 0!==d){c=c[c.length-1];b=b.localName;var e;b in c?e=c[b]:e=c[b]=[];e.push(d)}}}
function M(a){return function(b,c){var d=a.call(this,b,c);void 0!==d&&(c[c.length-1][b.localName]=d)}}function N(a,b,c){c=void 0!==c?c:{};var d,e;d=0;for(e=a.length;d<e;++d)c[a[d]]=b;return c}function O(a,b,c,d){d.push(a);for(a=c.firstElementChild;a;a=a.nextElementSibling)c=b[a.namespaceURI],void 0!==c&&(c=c[a.localName])&&c.call(void 0,a,d);return d.pop()};function cc(){}function dc(a,b){return b instanceof Document?a.b(b):b instanceof Node?a.a(b):"string"===typeof b?(b=(new DOMParser).parseFromString(b,"application/xml"),a.b(b)):null};function ec(a){a=$b(a,!1,[]).join("");a=(a=/^\s*(\d+)\s*$/.exec(a))?parseInt(a[1],10):void 0;return a}function P(a){return $b(a,!1,[]).join("").trim()};function fc(){}n(fc,cc);fc.prototype.b=function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType==Node.ELEMENT_NODE)return this.a(a);return null};fc.prototype.a=function(a){return(a=O({},gc,a,[]))?a:null};
var Q=[null,"http://www.opengis.net/ows/1.1"],gc=N(Q,{ServiceIdentification:M(function(a,b){return O({},hc,a,b)}),ServiceProvider:M(function(a,b){return O({},ic,a,b)}),OperationsMetadata:M(function(a,b){return O({},jc,a,b)})}),kc=N(Q,{DeliveryPoint:M(P),City:M(P),AdministrativeArea:M(P),PostalCode:M(P),Country:M(P),ElectronicMailAddress:M(P)}),lc=N(Q,{Value:L(function(a){return P(a)})}),mc=N(Q,{AllowedValues:M(function(a,b){return O({},lc,a,b)})}),oc=N(Q,{Phone:M(function(a,b){return O({},nc,a,b)}),
Address:M(function(a,b){return O({},kc,a,b)})}),qc=N(Q,{HTTP:M(function(a,b){return O({},pc,a,b)})}),pc=N(Q,{Get:L(function(a,b){var c=Zb(a);return c?O({href:c},rc,a,b):void 0}),Post:void 0}),sc=N(Q,{DCP:M(function(a,b){return O({},qc,a,b)})}),jc=N(Q,{Operation:function(a,b){var c=a.getAttribute("name");(a=O({},sc,a,b))&&(b[b.length-1][c]=a)}}),nc=N(Q,{Voice:M(P),Facsimile:M(P)}),rc=N(Q,{Constraint:L(function(a,b){var c=a.getAttribute("name");return c?O({name:c},mc,a,b):void 0})}),tc=N(Q,{IndividualName:M(P),
PositionName:M(P),ContactInfo:M(function(a,b){return O({},oc,a,b)})}),hc=N(Q,{Title:M(P),ServiceTypeVersion:M(P),ServiceType:M(P)}),ic=N(Q,{ProviderName:M(P),ProviderSite:M(Zb),ServiceContact:M(function(a,b){return O({},tc,a,b)})});function uc(){this.c=new fc}n(uc,cc);uc.prototype.b=function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType==Node.ELEMENT_NODE)return this.a(a);return null};uc.prototype.a=function(a){var b=a.getAttribute("version").trim(),c=this.c.a(a);if(!c)return null;c.version=b;return(c=O(c,vc,a,[]))?c:null};function bc(a){var b=P(a).split(" ");if(b&&2==b.length)return a=+b[0],b=+b[1],isNaN(a)||isNaN(b)?void 0:[a,b]}
var R=[null,"http://www.opengis.net/wmts/1.0"],wc=[null,"http://www.opengis.net/ows/1.1"],vc=N(R,{Contents:M(function(a,b){return O({},xc,a,b)})}),xc=N(R,{Layer:L(function(a,b){return O({},yc,a,b)}),TileMatrixSet:L(function(a,b){return O({},zc,a,b)})}),yc=N(R,{Style:L(function(a,b){if(b=O({},Ac,a,b))return a="true"===a.getAttribute("isDefault"),b.isDefault=a,b}),Format:L(P),TileMatrixSetLink:L(function(a,b){return O({},Bc,a,b)}),Dimension:L(function(a,b){return O({},Cc,a,b)}),ResourceURL:L(function(a){var b=
a.getAttribute("format"),c=a.getAttribute("template");a=a.getAttribute("resourceType");var d={};b&&(d.format=b);c&&(d.template=c);a&&(d.resourceType=a);return d})},N(wc,{Title:M(P),Abstract:M(P),WGS84BoundingBox:M(function(a,b){a=O([],Dc,a,b);if(2!=a.length)a=void 0;else{b=[Infinity,Infinity,-Infinity,-Infinity];for(var c=0,d=a.length;c<d;++c){var e=b,f=a[c];f[0]<e[0]&&(e[0]=f[0]);f[0]>e[2]&&(e[2]=f[0]);f[1]<e[1]&&(e[1]=f[1]);f[1]>e[3]&&(e[3]=f[1])}a=b}return a}),Identifier:M(P)})),Ac=N(R,{LegendURL:L(function(a){var b=
{};b.format=a.getAttribute("format");b.href=Zb(a);return b})},N(wc,{Title:M(P),Identifier:M(P)})),Bc=N(R,{TileMatrixSet:M(P)}),Cc=N(R,{Default:M(P),Value:L(P)},N(wc,{Identifier:M(P)})),Dc=N(wc,{LowerCorner:ac(),UpperCorner:ac()}),zc=N(R,{WellKnownScaleSet:M(P),TileMatrix:L(function(a,b){return O({},Ec,a,b)})},N(wc,{SupportedCRS:M(P),Identifier:M(P)})),Ec=N(R,{TopLeftCorner:M(bc),ScaleDenominator:M(function(a){a=$b(a,!1,[]).join("");a=(a=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(a))?parseFloat(a[1]):
void 0;return a}),TileWidth:M(ec),TileHeight:M(ec),MatrixWidth:M(ec),MatrixHeight:M(ec)},N(wc,{Identifier:M(P)}));function Fc(a){a=a||{};Yb.call(this,{l:a.l,u:a.u,projection:a.projection,R:a.R});this.a=a.params||{};this.g=!0;Gc(this)}n(Fc,Yb);Fc.prototype.updateParams=function(a){q(this.a,a);Gc(this);x(this)};function Gc(a){var b;a:{b=(""+(a.a.VERSION||"1.3.0")).split(".");for(var c=["1","3"],d=0;d<Math.max(b.length,c.length);d++){var e=parseInt(b[d]||"0",10),f=parseInt(c[d]||"0",10);if(e>f){b=1;break a}if(f>e){b=-1;break a}}b=0}a.g=0<=b};var Hc=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;function Ic(a,b){if(a){a=a.split("&");for(var c=0;c<a.length;c++){var d=a[c].indexOf("="),e,f=null;0<=d?(e=a[c].substring(0,d),f=a[c].substring(d+1)):e=a[c];b(e,f?decodeURIComponent(f.replace(/\+/g," ")):"")}}}
function Jc(a,b,c,d){for(var e=c.length;0<=(b=a.indexOf(c,b))&&b<d;){var f=a.charCodeAt(b-1);if(38==f||63==f)if(f=a.charCodeAt(b+e),!f||61==f||38==f||35==f)return b;b+=e+1}return-1}var Kc=/#|$/,Lc=/[?&]($|#)/;
function S(a,b,c){for(var d=a.search(Kc),e=0,f,g=[];0<=(f=Jc(a,e,b,d));)g.push(a.substring(e,f)),e=Math.min(a.indexOf("&",f)+1||d,d);g.push(a.substr(e));a=[g.join("").replace(Lc,"$1"),"&",b];null!=c&&a.push("=",encodeURIComponent(String(c)));a[1]&&(c=a[0],b=c.indexOf("#"),0<=b&&(a.push(c.substr(b)),a[0]=c=c.substr(0,b)),b=c.indexOf("?"),0>b?a[1]="?":b==c.length-1&&(a[1]=void 0));return a.join("")};function T(a,b){this.b=a;this.a=b}T.$inject=["$q","$http"];T.prototype.Ka=function(a,b,c,d,e){b={LAYERS:b};var f;d&&(b.TIME=d);c&&(b.SERVERTYPE=c,f=c.replace("qgisserver","qgis"));a=new Fc({url:a,params:b,serverType:f});e&&a.updateParams(e);return new Xb({source:a})};T.prototype.createBasicWMSLayer=T.prototype.Ka;
T.prototype.La=function(a,b,c){var d=new uc,e=new Bb({ma:Infinity}),f=this.b;return this.a.get(a).then(function(g){var l;g.data&&(l=dc(d,g.data));return l?(g=xb(l,{layer:b}),g=new tb(g),c&&wb(g,c),e.set("source",g),l=Ua(l.Contents.Layer,function(a){return a.Identifier==b}),e.set("capabilitiesStyles",l.Style),f.resolve(e)):f.reject("Failed to get WMTS capabilities from "+a)})};T.prototype.createWMTSLayerFromCapabilitites=T.prototype.La;T.prototype.sa=function(a){var b=new Lb;null!=a&&b.set(G,a);return b};
T.prototype.createBasicGroup=T.prototype.sa;T.prototype.Ra=function(a,b){var c;a.g().get(G).a.some(function(a){return a.get("groupName")===b?(c=a,!0):!1});c||(c=this.sa(),c.set("groupName",b),a.a(c));return c};T.prototype.getGroupFromMap=T.prototype.Ra;T.prototype.Oa=function(a){return Mc(this,a,[])};T.prototype.getFlatLayers=T.prototype.Oa;function Mc(a,b,c){b instanceof Lb?b.get(G).forEach(function(a){Mc(this,a,c)},a):0>c.indexOf(b)&&c.push(b);return c}
T.prototype.wa=function(a,b){var c=null;b.some(function(b){b instanceof Lb?(b=b.get(G).a,c=this.wa(a,b)):b.get("layerNodeName")===a&&(c=b);return!!c},this);return c};T.prototype.getLayerByName=T.prototype.wa;T.prototype.Ya=function(a){var b;a=a.get("capabilitiesStyles");void 0!==a&&(a=a[0].legendURL,void 0!==a&&(b=a[0].href));return b};T.prototype.getWMTSLegendURL=T.prototype.Ya;
T.prototype.Xa=function(a,b,c,d){if(a)return a=S(a,"FORMAT","image/png"),a=S(a,"TRANSPARENT",!0),a=S(a,"SERVICE","WMS"),a=S(a,"VERSION","1.1.1"),a=S(a,"REQUEST","GetLegendGraphic"),a=S(a,"LAYER",b),void 0!==c&&(a=S(a,"SCALE",c)),void 0!==d&&(a=S(a,"RULE",d)),a};T.prototype.getWMSLegendURL=T.prototype.Xa;T.prototype.kb=function(a,b,c){0>=b.length?a.set("visible",!1):(a.set("visible",!0),a=Ab(a),c?a.updateParams({LAYERS:b,TIME:c}):a.updateParams({LAYERS:b}))};T.prototype.updateWMSLayerState=T.prototype.kb;
J.service("ngeoLayerHelper",T);K.value("gmfThemesOptions",{});function U(a,b,c){v.call(this);this.na=c;this.S=a;this.D=null;b.has("gmfTreeUrl")&&(this.D=b.get("gmfTreeUrl"));this.g="0";b.has("cacheVersion")&&(this.g=b.get("cacheVersion"));this.w=null;b.has("ngeoLocation")&&(this.w=b.get("ngeoLocation"));this.a=c.defer();this.c=this.a.promise;this.i=!1}n(U,v);U.$inject="$http $injector $q ngeoLayerHelper gettextCatalog gmfThemesOptions".split(" ");
function Nc(a,b){for(var c=0,d=a.length;c<d;c++)for(var e=a[c],f=0,g=e.children.length;f<g;f++){var l=e.children[f],t=[];Oc(l,t);for(var F=0,w=t.length;F<w;F++)if(t[F].name==b)return l}return null}function Pc(a,b){return Ua(a,function(a){return a.name===b})}function Oc(a,b){var c=a.children;if(void 0!==c)for(a=0;a<c.length;a++)Oc(c[a],b);else b.push(a)}m("gmf.Themes.getFlatNodes",Oc);U.prototype.Va=function(a){return this.c.then(function(b){return Pc(b.themes,a)})};U.prototype.getThemeObject=U.prototype.Va;
U.prototype.Z=function(){return this.c.then(function(a){return a.themes})};U.prototype.getThemesObject=U.prototype.Z;U.prototype.xa=function(){return this.c.then(function(a){return a.ogcServers})};U.prototype.getOgcServersObject=U.prototype.xa;
U.prototype.Aa=function(a){this.i&&(this.a=this.na.defer(),this.c=this.a.promise,this.i=!1);this.S.get(this.D,{params:void 0!==a?{role:a,cache_version:this.g}:{cache_version:this.g},cache:!1,withCredentials:!0}).then(function(a){if(0!=a.data.errors.length){var c="The themes contain some errors:\n"+a.data.errors.join("\n");console.error(c);null!==this.w&&this.w.za("debug")&&window.alert(c)}this.a.resolve(a.data);ua(this,"change");this.i=!0}.bind(this),function(a){this.a.reject(a)}.bind(this))};
U.prototype.loadThemes=U.prototype.Aa;K.service("gmfThemes",U);m("ngeo.MessageType",{ERROR:"error",INFORMATION:"information",SUCCESS:"success",WARNING:"warning"});function V(){}V.prototype.show=function(a){Qc(this,a).forEach(this.f,this)};V.prototype.show=V.prototype.show;V.prototype.error=function(a){this.show(Qc(this,a,"error"))};V.prototype.error=V.prototype.error;V.prototype.info=function(a){this.show(Qc(this,a,"information"))};V.prototype.info=V.prototype.info;V.prototype.success=function(a){this.show(Qc(this,a,"success"))};V.prototype.success=V.prototype.success;
V.prototype.warn=function(a){this.show(Qc(this,a,"warning"))};V.prototype.warn=V.prototype.warn;function Qc(a,b,c){var d=[],e=null;"string"===typeof b?d.push({msg:b,type:void 0!==c?c:"information"}):Array.isArray(b)?b.forEach(function(a){"string"===typeof b?e={msg:a,type:void 0!==c?c:"information"}:(e=a,void 0!==c&&(e.type=c));d.push(e)},a):(e=b,void 0!==c&&(e.type=c),void 0===e.type&&(e.type="information"),d.push(e));return d};function W(a){this.b=a;a=angular.element('<div class="ngeo-notification"></div>');angular.element(document.body).append(a);this.c=a;this.a={}}n(W,V);W.$inject=["$timeout"];W.prototype.notify=function(a){this.show(a)};W.prototype.notify=W.prototype.notify;W.prototype.clear=function(){for(var a in this.a){var b=this.a[parseInt(a,10)],c=b.Na,b=b.promise,d=c[da]||(c[da]=++fa);c.alert("close");this.b.cancel(b);delete this.a[d]}};W.prototype.clear=W.prototype.clear;
W.prototype.f=function(a){var b=["alert","fade"];switch(a.type){case "error":b.push("alert-danger");break;case "information":b.push("alert-info");break;case "success":b.push("alert-success");break;case "warning":b.push("alert-warning")}var c=angular.element('<div class="'+b.join(" ")+'"></div>'),d;a.target?d=angular.element(a.target):d=this.c;d.append(c);c.html(a.msg).addClass("in");a=void 0!==a.delay?a.delay:7E3;var b={Na:c},e=c[da]||(c[da]=++fa);b.promise=this.b(function(){c.alert("close");delete this.a[e]}.bind(this),
a);this.a[e]=b};J.service("ngeoNotification",W);var Rc=Array.prototype.forEach?function(a,b,c){Array.prototype.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=k(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)};function Tc(a){return Array.prototype.concat.apply(Array.prototype,arguments)}function Uc(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]};var Vc="StopIteration"in aa?aa.StopIteration:{message:"StopIteration",stack:""};function Wc(){}Wc.prototype.a=function(){throw Vc;};Wc.prototype.H=function(){return this};function Xc(a){if(a instanceof Wc)return a;if("function"==typeof a.H)return a.H(!1);if(ca(a)){var b=0,c=new Wc;c.a=function(){for(;;){if(b>=a.length)throw Vc;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function Yc(a,b){if(ca(a))try{Rc(a,b,void 0)}catch(c){if(c!==Vc)throw c;}else{a=Xc(a);try{for(;;)b.call(void 0,a.a(),void 0,a)}catch(c){if(c!==Vc)throw c;}}}function Zc(a){if(ca(a))return Uc(a);a=Xc(a);var b=[];Yc(a,function(a){b.push(a)});return b};function $c(){};function ad(){}ga(ad,$c);ad.prototype.I=function(){var a=0;Yc(this.H(!0),function(){a++});return a};ad.prototype.clear=function(){var a=Zc(this.H(!0)),b=this;Rc(a,function(a){b.remove(a)})};function bd(a){this.a=a}ga(bd,ad);function cd(a){if(!a.a)return!1;try{return a.a.setItem("__sak","1"),a.a.removeItem("__sak"),!0}catch(b){return!1}}h=bd.prototype;h.set=function(a,b){try{this.a.setItem(a,b)}catch(c){if(0==this.a.length)throw"Storage mechanism: Storage disabled";throw"Storage mechanism: Quota exceeded";}};h.get=function(a){a=this.a.getItem(a);if(!k(a)&&null!==a)throw"Storage mechanism: Invalid value was encountered";return a};h.remove=function(a){this.a.removeItem(a)};h.I=function(){return this.a.length};
h.H=function(a){var b=0,c=this.a,d=new Wc;d.a=function(){if(b>=c.length)throw Vc;var d=c.key(b++);if(a)return d;d=c.getItem(d);if(!k(d))throw"Storage mechanism: Invalid value was encountered";return d};return d};h.clear=function(){this.a.clear()};h.key=function(a){return this.a.key(a)};function dd(){var a=null;try{a=window.localStorage||null}catch(b){}this.a=a}ga(dd,bd);function ed(a,b){for(var c in a)b.call(void 0,a[c],c,a)}function fd(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function gd(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b};function hd(a){if(a.s&&"function"==typeof a.s)return a.s();if(k(a))return a.split("");if(ca(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return fd(a)}
function id(a,b,c){if(a.forEach&&"function"==typeof a.forEach)a.forEach(b,c);else if(ca(a)||k(a))Rc(a,b,c);else{var d;if(a.o&&"function"==typeof a.o)d=a.o();else if(a.s&&"function"==typeof a.s)d=void 0;else if(ca(a)||k(a)){d=[];for(var e=a.length,f=0;f<e;f++)d.push(f)}else d=gd(a);for(var e=hd(a),f=e.length,g=0;g<f;g++)b.call(c,e[g],d&&d[g],a)}};function jd(a,b){this.b={};this.a=[];this.f=this.c=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else if(a){a instanceof jd?(c=a.o(),d=a.s()):(c=gd(a),d=fd(a));for(var e=0;e<c.length;e++)this.set(c[e],d[e])}}h=jd.prototype;h.I=function(){return this.c};h.s=function(){kd(this);for(var a=[],b=0;b<this.a.length;b++)a.push(this.b[this.a[b]]);return a};h.o=function(){kd(this);return this.a.concat()};
h.equals=function(a,b){if(this===a)return!0;if(this.c!=a.I())return!1;b=b||ld;kd(this);for(var c,d=0;c=this.a[d];d++)if(!b(this.get(c),a.get(c)))return!1;return!0};function ld(a,b){return a===b}h.clear=function(){this.b={};this.f=this.c=this.a.length=0};h.remove=function(a){return md(this.b,a)?(delete this.b[a],this.c--,this.f++,this.a.length>2*this.c&&kd(this),!0):!1};
function kd(a){if(a.c!=a.a.length){for(var b=0,c=0;b<a.a.length;){var d=a.a[b];md(a.b,d)&&(a.a[c++]=d);b++}a.a.length=c}if(a.c!=a.a.length){for(var e={},c=b=0;b<a.a.length;)d=a.a[b],md(e,d)||(a.a[c++]=d,e[d]=1),b++;a.a.length=c}}h.get=function(a,b){return md(this.b,a)?this.b[a]:b};h.set=function(a,b){md(this.b,a)||(this.c++,this.a.push(a),this.f++);this.b[a]=b};h.forEach=function(a,b){for(var c=this.o(),d=0;d<c.length;d++){var e=c[d],f=this.get(e);a.call(b,f,e,this)}};h.clone=function(){return new jd(this)};
h.transpose=function(){for(var a=new jd,b=0;b<this.a.length;b++){var c=this.a[b];a.set(this.b[c],c)}return a};h.H=function(a){kd(this);var b=0,c=this.f,d=this,e=new Wc;e.a=function(){if(c!=d.f)throw Error("The map has changed since the iterator was created");if(b>=d.a.length)throw Vc;var e=d.a[b++];return a?e:d.b[e]};return e};function md(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function nd(a,b){this.b=this.g=this.f="";this.j=null;this.c=this.i="";this.h=!1;var c;a instanceof nd?(this.h=void 0!==b?b:a.h,od(this,a.f),this.g=a.g,this.b=a.b,pd(this,a.j),this.J(a.A()),qd(this,a.a.clone()),this.c=a.c):a&&(c=String(a).match(Hc))?(this.h=!!b,od(this,c[1]||"",!0),this.g=rd(c[2]||""),this.b=rd(c[3]||"",!0),pd(this,c[4]),this.J(c[5]||"",!0),qd(this,c[6]||"",!0),this.c=rd(c[7]||"")):(this.h=!!b,this.a=new sd(null,0,this.h))}h=nd.prototype;
h.toString=function(){var a=[],b=this.f;b&&a.push(td(b,ud,!0),":");var c=this.b;if(c||"file"==b)a.push("//"),(b=this.g)&&a.push(td(b,ud,!0),"@"),a.push(encodeURIComponent(String(c)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c=this.j,null!=c&&a.push(":",String(c));if(c=this.A())this.b&&"/"!=c.charAt(0)&&a.push("/"),a.push(td(c,"/"==c.charAt(0)?vd:wd,!0));(c=this.a.toString())&&a.push("?",c);(c=this.c)&&a.push("#",td(c,xd));return a.join("")};
h.resolve=function(a){var b=this.clone(),c=!!a.f;c?od(b,a.f):c=!!a.g;c?b.g=a.g:c=!!a.b;c?b.b=a.b:c=null!=a.j;var d=a.A();if(c)pd(b,a.j);else if(c=!!a.i){if("/"!=d.charAt(0))if(this.b&&!this.i)d="/"+d;else{var e=b.A().lastIndexOf("/");-1!=e&&(d=b.A().substr(0,e+1)+d)}e=d;if(".."==e||"."==e)d="";else if(-1!=e.indexOf("./")||-1!=e.indexOf("/.")){for(var d=0==e.lastIndexOf("/",0),e=e.split("/"),f=[],g=0;g<e.length;){var l=e[g++];"."==l?d&&g==e.length&&f.push(""):".."==l?((1<f.length||1==f.length&&""!=
f[0])&&f.pop(),d&&g==e.length&&f.push("")):(f.push(l),d=!0)}d=f.join("/")}else d=e}c?b.J(d):c=""!==a.a.toString();c?qd(b,rd(a.a.toString())):c=!!a.c;c&&(b.c=a.c);return b};h.clone=function(){return new nd(this)};function od(a,b,c){a.f=c?rd(b,!0):b;a.f&&(a.f=a.f.replace(/:$/,""))}function pd(a,b){if(b){b=Number(b);if(isNaN(b)||0>b)throw Error("Bad port number "+b);a.j=b}else a.j=null}h.A=function(){return this.i};h.J=function(a,b){this.i=b?rd(a,!0):a;return this};
function qd(a,b,c){b instanceof sd?(a.a=b,yd(a.a,a.h)):(c||(b=td(b,zd)),a.a=new sd(b,0,a.h))}function rd(a,b){return a?b?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function td(a,b,c){return k(a)?(a=encodeURI(a).replace(b,Ad),c&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Ad(a){a=a.charCodeAt(0);return"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var ud=/[#\/\?@]/g,wd=/[\#\?:]/g,vd=/[\#\?]/g,zd=/[\#\?@]/g,xd=/#/g;
function sd(a,b,c){this.b=this.a=null;this.c=a||null;this.f=!!c}function Bd(a){a.a||(a.a=new jd,a.b=0,a.c&&Ic(a.c,function(b,c){a.add(decodeURIComponent(b.replace(/\+/g," ")),c)}))}h=sd.prototype;h.I=function(){Bd(this);return this.b};h.add=function(a,b){Bd(this);this.c=null;a=Cd(this,a);var c=this.a.get(a);c||this.a.set(a,c=[]);c.push(b);this.b=this.b+1;return this};
h.remove=function(a){Bd(this);a=Cd(this,a);return md(this.a.b,a)?(this.c=null,this.b=this.b-this.a.get(a).length,this.a.remove(a)):!1};h.clear=function(){this.a=this.c=null;this.b=0};function Dd(a,b){Bd(a);b=Cd(a,b);return md(a.a.b,b)}h.o=function(){Bd(this);for(var a=this.a.s(),b=this.a.o(),c=[],d=0;d<b.length;d++)for(var e=a[d],f=0;f<e.length;f++)c.push(b[d]);return c};
h.s=function(a){Bd(this);var b=[];if(k(a))Dd(this,a)&&(b=Tc(b,this.a.get(Cd(this,a))));else{a=this.a.s();for(var c=0;c<a.length;c++)b=Tc(b,a[c])}return b};h.set=function(a,b){Bd(this);this.c=null;a=Cd(this,a);Dd(this,a)&&(this.b=this.b-this.a.get(a).length);this.a.set(a,[b]);this.b=this.b+1;return this};h.get=function(a,b){a=a?this.s(a):[];return 0<a.length?String(a[0]):b};
h.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var a=[],b=this.a.o(),c=0;c<b.length;c++)for(var d=b[c],e=encodeURIComponent(String(d)),d=this.s(d),f=0;f<d.length;f++){var g=e;""!==d[f]&&(g+="="+encodeURIComponent(String(d[f])));a.push(g)}return this.c=a.join("&")};h.clone=function(){var a=new sd;a.c=this.c;this.a&&(a.a=this.a.clone(),a.b=this.b);return a};function Cd(a,b){b=String(b);a.f&&(b=b.toLowerCase());return b}
function yd(a,b){b&&!a.f&&(Bd(a),a.c=null,a.a.forEach(function(a,b){var e=b.toLowerCase();b!=e&&(this.remove(b),this.remove(e),0<a.length&&(this.c=null,this.a.set(Cd(this,e),Uc(a)),this.b=this.b+a.length))},a));a.f=b}h.extend=function(a){for(var b=0;b<arguments.length;b++)id(arguments[b],function(a,b){this.add(b,a)},this)};function X(a,b){this.b=b;this.a=a instanceof nd?a.clone():new nd(a,void 0)}X.prototype.Wa=function(){return this.a};X.prototype.getUri=X.prototype.Wa;X.prototype.A=function(){return this.a.A()};X.prototype.getPath=X.prototype.A;X.prototype.aa=function(a){var b;void 0!==a?(b=this.a.clone(),b.a.extend(a)):b=this.a;return b.toString()};X.prototype.getUriString=X.prototype.aa;X.prototype.za=function(a){return Dd(this.a.a,a)};X.prototype.hasParam=X.prototype.za;
X.prototype.bb=function(a){return Dd(Ed(this).a,a)};X.prototype.hasFragmentParam=X.prototype.bb;X.prototype.ja=function(a){return this.a.a.get(a)};X.prototype.getParam=X.prototype.ja;X.prototype.ua=function(a){a=Ed(this).a.get(a);return void 0!==a?decodeURIComponent(a.replace(/\+/g," ")):void 0};X.prototype.getFragmentParam=X.prototype.ua;X.prototype.Sa=function(a){a=this.ja(a);if(void 0!==a)return a=parseInt(a,10),isNaN(a)?void 0:a};X.prototype.getParamAsInt=X.prototype.Sa;
X.prototype.Pa=function(a){a=this.ua(a);if(void 0!==a)return a=parseInt(a,10),isNaN(a)?void 0:a};X.prototype.getFragmentParamAsInt=X.prototype.Pa;X.prototype.ka=function(){return this.a.a.o()};X.prototype.getParamKeys=X.prototype.ka;X.prototype.va=function(){return Ed(this).a.o()};X.prototype.getFragmentParamKeys=X.prototype.va;X.prototype.Ta=function(a){return this.ka().filter(function(b){return 0==b.indexOf(a)})};X.prototype.getParamKeysWithPrefix=X.prototype.Ta;
X.prototype.Qa=function(a){return this.va().filter(function(b){return 0==b.indexOf(a)})};X.prototype.getFragmentParamKeysWithPrefix=X.prototype.Qa;X.prototype.updateParams=function(a){var b=this.a.a;ed(a,function(a,d){b.set(d,a)})};X.prototype.updateParams=X.prototype.updateParams;X.prototype.jb=function(a){var b=Ed(this),c=b.a;ed(a,function(a,b){a=void 0!==a?encodeURIComponent(String(a)):void 0;c.set(b,a)});Fd(this,b)};X.prototype.updateFragmentParams=X.prototype.jb;X.prototype.W=function(a){this.a.a.remove(a)};
X.prototype.deleteParam=X.prototype.W;X.prototype.Ma=function(a){var b=Ed(this);b.a.remove(a);Fd(this,b)};X.prototype.deleteFragmentParam=X.prototype.Ma;X.prototype.refresh=function(){this.b.replaceState(null,"",this.aa())};X.prototype.refresh=X.prototype.refresh;X.prototype.J=function(a){this.a.J(a)};X.prototype.setPath=X.prototype.J;function Ed(a){a=a.a.c;var b=new nd(null);qd(b,a);return b}function Fd(a,b){b=rd(b.a.toString());a.a.c=b}
function Gd(a,b){var c=b.history,d=new X(b.location,b.history),e=d.aa();a.$watch(function(){var b=d.aa();e!==b&&a.$evalAsync(function(){e=b;c&&c.replaceState&&c.replaceState(null,"",b);a.$broadcast("ngeoLocationChange")})});return d}Gd.$inject=["$rootScope","$window"];J.factory("ngeoLocation",Gd);function Hd(a){this.b={};this.c=a;this.a=new dd;this.ta=["theme"];var b=a.ka(),c,d=new RegExp(/\/theme\/([^\?\/]*)/),e=a.A(),f={};if(0===b.length||1===b.length&&"debug"==b[0]){if(cd(this.a)){b=this.a.I();for(a=0;a<b;++a){c=this.a.key(a);var d=this.b,g=c,l;e=this.a.get(c);try{l=angular.fromJson(e)}catch(t){l=e}d[g]=l;0>this.ta.indexOf(c)&&(f[c]=this.b[c])}this.c.updateParams(f)}}else{for(a=0;a<b.length;++a){c=b[a];l=this.b;f=c;c=this.c.ja(c);try{g=angular.fromJson(c)}catch(t){g=c}l[f]=g}(a=e.match(d))&&
(this.b.theme=a[1])}}Hd.$inject=["ngeoLocation"];function Id(a,b){var c={};Object.keys(b).forEach(function(a){0>this.ta.indexOf(a)&&(c[a]=b[a])},a);a.c.updateParams(c);if(cd(a.a))for(var d in b)a.a.set(d,angular.toJson(b[d]))}Hd.prototype.W=function(a){this.c.W(a);cd(this.a)&&this.a.remove(a)};J.service("ngeoStateManager",Hd);J.value("ngeoDecorateLayer",function(a){Object.defineProperty(a,"visible",{configurable:!0,get:function(){return a.get("visible")},set:function(b){a.set("visible",b)}});Object.defineProperty(a,"opacity",{configurable:!0,get:function(){return Math.round(100*a.get("opacity"))/100+""},set:function(b){a.set("opacity",+b)}})});J.value("ngeoDecorateLayerLoading",function(a,b){function c(a){var b=a.get("load_count"),d=a.get("parent_group");a.set("load_count",++b,!0);d&&c(d)}function d(a){var b=a.get("load_count"),c=a.get("parent_group");a.set("load_count",--b,!0);c&&d(c)}var e,f=null,g=null;a.set("load_count",0,!0);if(a instanceof Lb)a.get(G).on("add",function(b){b.element.set("parent_group",a)});if(a instanceof E){e=Ab(a);if(null===e)return;e instanceof kb?(f=["tileloadstart"],g=["tileloadend","tileloaderror"]):e instanceof
Yb?(f=["imageloadstart"],g=["imageloadend","imageloaderror"]):ka("unsupported source type");e.on(f,function(){c(a);b.$applyAsync()});e.on(g,function(){d(a);b.$applyAsync()})}Object.defineProperty(a,"loading",{configurable:!0,get:function(){return 0<a.get("load_count")}})});J.value("ngeoLayertreeTemplateUrl",function(a,b){a=b.ngeoLayertreeTemplateurl;return void 0!==a?a:"ngeo/layertree.html"});function Jd(a,b){return{restrict:"A",scope:!0,templateUrl:b,controller:"NgeoLayertreeController"}}Jd.$inject=["$compile","ngeoLayertreeTemplateUrl"];J.directive("ngeoLayertree",Jd);
function Y(a,b,c,d,e){var f=void 0===c.ngeoLayertreeNotroot;this.isRoot=f;var g=c.ngeoLayertree;this.Da=b;this.properties={};this.a="off";this.node=void 0;f?a.$watch(g,function(a){this.node=a}.bind(this)):this.node=a.$eval(g);b=a.$eval(c.ngeoLayertreeMap);this.parent=a.$parent.layertreeCtrl;this.children=[];this.parent&&this.parent.children.push(this);a.$on("$destroy",function(){this.parent&&this.parent.children.splice(this.parent.children.indexOf(this),1)}.bind(this));this.uid=this[da]||(this[da]=
++fa);this.depth=f?0:this.parent.depth+1;a.uid=this.uid;a.depth=this.depth;this.map=b;b=c.ngeoLayertreeNodelayer;void 0===b&&(b=a.$eval(c.ngeoLayertreeNodelayerexpr));this.nodelayerExpr=b;if(this.layer=f?null:a.$eval(b,{treeCtrl:this}))e(this.layer,a),d(this.layer),u(this.layer,za("opacity"),function(){this.Da.$broadcast("ngeo-layertree-opacity",this)},this);d=c.ngeoLayertreeListeners;void 0===d&&(d=a.$eval(c.ngeoLayertreeListenersexpr));this.listenersExpr=d;null!=d&&a.$eval(d,{treeScope:a,treeCtrl:this});
a.layertreeCtrl=this}m("ngeo.LayertreeController",Y);Y.$inject=["$scope","$rootScope","$attrs","ngeoDecorateLayer","ngeoDecorateLayerLoading"];Y.prototype.Y=function(){return this.a};Y.prototype.getState=Y.prototype.Y;Y.prototype.ea=function(a,b){a!==this.a&&(Kd(this,a),this.parent&&Ld(this.parent),a=this.isRoot?this.children:[Md(this)],(void 0===b||b)&&a.forEach(function(a){this.Da.$broadcast("ngeo-layertree-state",this,a)}.bind(this)))};Y.prototype.setState=Y.prototype.ea;
function Kd(a,b){a.a="on"===b?"on":"off";a.children.forEach(function(a){Kd(a,this.a)},a)}function Ld(a){var b=a.ia();a.a!==b&&(a.a=b,a.parent&&Ld(a.parent))}Y.prototype.ia=function(){if(void 0===this.node.children)return this.a;var a,b;this.children.some(function(c){a=c.ia();if(b&&b!==a)return a="indeterminate";b=a});return a};Y.prototype.getCalculateState=Y.prototype.ia;Y.prototype.Ua=function(a){var b=this.layer,c=this.map;if(b)if(void 0!==a)a?c.a(b):c.w(b);else return 0<=c.i().a.indexOf(b)};
Y.prototype.getSetActive=Y.prototype.Ua;function Md(a){for(;!a.parent.isRoot;)a=a.parent;return a}Y.prototype.U=function(a){switch(a(this)||"DESCEND"){case "STOP":return!0;case "SKIP":return!1;case "DESCEND":for(var b=0;b<this.children.length;++b)if(this.children[b].U(a))return!0;return!1;default:ka("Unhandled case")}};Y.prototype.traverseDepthFirst=Y.prototype.U;J.controller("NgeoLayertreeController",Y);function Z(a,b,c,d,e,f){this.$timeout_=a;this.g=b;this.i=d;this.b=e;this.a={children:[]};this.rootCtrl=null;this.c=[];this.f=null;this.h=f;u(this.b,"change",this.j,this)}Z.$inject="$timeout gettextCatalog ngeoLayerHelper ngeoNotification gmfThemes ngeoStateManager".split(" ");Z.prototype.j=function(){this.b.xa().then(function(){}.bind(this))};Z.prototype.Ea=function(a){this.a.children.length=0;this.h.W("tree_groups");return this.M(a)};Z.prototype.setFirstLevelGroups=Z.prototype.Ea;
Z.prototype.M=function(a,b,c){var d=[];a.slice().reverse().forEach(function(a){Nd(this,a)||d.push(a)}.bind(this));0<d.length&&!c&&Od(this,d);return 0===d.length};Z.prototype.addFirstLevelGroups=Z.prototype.M;function Pd(a,b){var c={};c.tree_groups=b.map(function(a){return a.name}).join(",");Id(a.h,c)}
function Nd(a,b){var c=!1,d=b.id;a.a.children.some(function(a){if(d===a.id)return c=!0},a);a.c.some(function(a){if(d===a.id)return c=!0},a);if(c)return!1;a.c.push(b);null!==a.f&&a.$timeout_.cancel(a.f);a.f=a.$timeout_(function(){this.c.forEach(function(a){this.a.children.unshift(a)},this);Pd(this,this.a.children);this.c.length=0;this.f=null}.bind(a));return!0}
Z.prototype.Ja=function(a){this.b.Z().then(function(b){a:{for(var c=0,d=b.length;c<d;c++)for(var e=b[c],f=0,g=e.children.length;f<g;f++){var l=e.children[f];if(l.name==a){b=l;break a}}b=null}b&&this.M([b],0,!1)}.bind(this))};Z.prototype.addGroupByName=Z.prototype.Ja;Z.prototype.Ia=function(a,b,c){this.b.Z().then(function(b){var e=Nc(b,a);if(e){var f=this.M([e],0,c);this.$timeout_(function(){var b=Qd(this,e.id);if(b){var c;b.U(function(b){if(b.node.name===a)return c=b,"STOP"});f&&b.ea("off");c&&c.ea("on")}else console.warn("Tree controler not found, unable to add the group")}.bind(this))}}.bind(this))};
Z.prototype.addGroupByLayerName=Z.prototype.Ia;Z.prototype.Ca=function(a){var b=this.a.children,c=0,d=!1;b.some(function(b){if(b.name===a.name)return d=!0;c++}.bind(this));d&&(b.splice(c,1),Pd(this,b))};Z.prototype.removeGroup=Z.prototype.Ca;Z.prototype.removeAll=function(){for(;this.a.children.length;)this.Ca(this.a.children[0])};Z.prototype.removeAll=Z.prototype.removeAll;
function Od(a,b){var c=[],d=a.g;b.forEach(function(a){c.push(a.name)});b=2>c.length?d.getString("group is already loaded."):d.getString("groups are already loaded.");a.i.notify({msg:c.join(", ")+" "+b,type:"information"})}function Qd(a,b){var c=null;a.rootCtrl&&a.rootCtrl.U&&a.rootCtrl.U(function(a){if(a.node.id===b)return c=a,"STOP"});return c}K.service("gmfTreeManager",Z);K.value("gmfTreeManagerModeFlush",!0);function Rd(a,b,c,d){this.c=b;this.a=c;this.b=d;this.themeName=""}Rd.$inject=["gmfThemes","gmfTreeManagerModeFlush","gmfTreeManager","ngeoStateManager"];Rd.prototype.oa=function(a,b){this.c?(Id(this.b,{theme:a.name}),this.themeName=a.name,this.a.Ea(a.children)):this.a.M(a.children,0,b)};Rd.prototype.addTheme=Rd.prototype.oa;Rd.prototype.removeAll=function(){this.a.removeAll()};Rd.prototype.removeAll=Rd.prototype.removeAll;K.service("gmfThemeManager",Rd);K.directive("gmfThemeselector",function(){return{restrict:"E",controller:"gmfThemeselectorController",scope:{filter:"=gmfThemeselectorFilter"},bindToController:!0,controllerAs:"tsCtrl",templateUrl:"gmf/themeselector.html"}});function Sd(a,b,c){this.gmfThemeManager=b;this.a=c;this.listenerKeys_=[];this.listenerKeys_.push(u(this.a,"change",this.c,this));a.$on("$destroy",this.b.bind(this))}m("gmf.ThemeselectorController",Sd);Sd.$inject=["$scope","gmfThemeManager","gmfThemes"];
Sd.prototype.c=function(){this.a.Z().then(function(a){this.themes=this.filter?a.filter(this.filter):a}.bind(this))};Sd.prototype.ib=function(a,b){a&&this.gmfThemeManager.oa(a,b)};Sd.prototype.setTheme=Sd.prototype.ib;Sd.prototype.b=function(){this.listenerKeys_.forEach(r);this.listenerKeys_.length=0};K.controller("gmfThemeselectorController",Sd);var Td=angular.module("gmfapp",["gmf"]);Td.value("gmfTreeUrl","https://geomapfish-demo.camptocamp.net/2.1/wsgi/themes?version=2&background=background");function Ud(a,b,c){this.filter=function(a){return"Enseignement"!==a.name};this.manager=c;b.Aa()}Ud.$inject=["$http","gmfThemes","gmfThemeManager"];Td.controller("MainController",Ud);}).call(window);
//# sourceMappingURL=themeselector.js.map
